#### 10 简单的命令

`date` 显示当前时间和日期

`cal` 显示当前月份的日历

`df` 显示磁盘驱动的空闲空间

`free` 显示空闲内存的数量

`exit` 结束一个终端会话

`Ctrl`+`Alt`+`F1`进行虚拟终端

`Alt`+`F7`返回图形化桌面

#### 导航

- `pwd` 打印当前工作目录的名称
- `cd` 切换目录
- `ls` 列出目录内容

`.` 符号指向当前工作目录，`..`符号指向当前工作目录的父目录

##### 一些有用的快捷方式

`cd` 切换当前工作目录到你的主目录

`cd -` 切换当前工作目录到之前的工作目录

`cd ~user_name` 切换当前工作目录到*user_name*的主目录

#### 探索系统

- `ls` 列出当前目录内容
- `file` 判断文件类型
- `less` 查看文件内容

##### 常用的ls选项

| 选项   | 长选项              | 描述             |
| ---- | ---------------- | -------------- |
| -a   | --all            | 列出所有文件         |
| -d   | --directory      |                |
| -F   | --classify       |                |
| -h   | --human-readable | 以人类可读的形式显示文件大小 |
| -l   |                  | 以长格式的形式显示结果    |
| -r   | --reverse        | 以逆序的形式显示结果     |
| -S   |                  | 以文件大小排序        |
| -t   |                  | 以修改时间排序        |

##### less命令

| 命令           | 行为         |
| ------------ | ---------- |
| Page Up或b    | 向后滚动一页     |
| Page Down或空格 | 向前滚动一页     |
| Up箭头         | 向上滚动一行     |
| Down箭头       | 向下滚动一行     |
| G            | 移动到文本文件的末端 |
| 1G或g         | 移动到文本文件的开始 |
| /characters  | 向前搜索该字符    |
| n            | 下一个搜索到的该字符 |
| h            | 显示帮助屏      |
| q            | 退出less     |

#### Linux系统的常用目录

| 目录          | 注释                           |
| ----------- | ---------------------------- |
| /           | 根目录                          |
| /bin        | 包含系统启动和运行必须存在的二进制文件          |
| /boot       | 包含Linux的内核，初始化RAM 磁盘图像和启动加载器 |
| /dev        | 管理设备节点的具体目录                  |
| /etc        | 包含所有系统级别的配置文件                |
| /home       | 在常用配置中，每个用户都会分配一个/home目录     |
| /lib        | 包含核心系统程序共享的库文件               |
| /lost+found | 每个已格式化的分区或设备都有会这个目录          |
| /media      | 包含可移除媒体的挂载点                  |
| /mnt        | 包含可移除设备的挂载点                  |
| /opt        | 用来安装可选的软件                    |
| /proc       | 由Linux内核管理的虚拟文件系统            |
| /root       | root账户的主目录                   |
| /sbin       | 包含系统级别的二进制文件                 |
| /tmp        | 存储临时文件                       |
| /usr        | 包含所有被普通用户使用的程序和支持文件          |
| /usr/bin    | 包含由LInux发行版安装的可执行程序          |
| /usr/lib    | /usr/sbin的共享库                |
| /usr/local  | 安装不包含在发行版的程序                 |

#### 操作文件和目录

- `cp` 复制文件和目录
- `mv` 移动或重命名文件和目录
- `mkdir` 创建目录
- `rm` 删除文件或目录
- `ln` 创建硬链接和符号链接

##### 通配符

| 通配符           | 意义                     |
| ------------- | ---------------------- |
| *             | 匹配任意多个字符               |
| ?             | 匹配任意单个字符               |
| [characters]  | 匹配characters集合中任意一个字符  |
| [!characters] | 匹配任意不在characters集合中的字符 |
| [[:class:]]   | 匹配任意是具体类别成员的字符         |

##### 常用的字符类别

| 字符类别          | 意义       |
| ------------- | -------- |
| `[[:alnum:]]` | 匹配任意字母字符 |
| `[[:alpha:]]` | 匹配任意拼音字符 |
| `[[:digit:]]` | 匹配任意数字   |
| `[[:lower:]]` | 匹配任意小写字母 |
| `[[:upper:]]` | 匹配任意大写字母 |

##### `mkdir`创建目录

```shell
mkdir dir1
mkdir dir1 dir2 dir3
```

##### `cp` 复制文件和目录

```shell
cp item1 item2
cp item... directory
```

##### cp选项

| 选项               | 意义                       |
| ---------------- | ------------------------ |
| -a,--archive     | 复制文件和目录和他们的所有属性          |
| -i,--interactive | 在覆盖已存在文件之前提示用户确认         |
| -r,--recursive   | 递归的复制目录和他们的内容，复制目录时需要该选项 |
| -u,--update      | 只复制不存在的文件或更新的文件到目的目录     |
| -v,--verbose     | 当复制执行的时候显示信息             |

##### `mv` 移动和重命名文件

```shell
mv item1 item2
mv item... directory
```

##### `rm`删除文件和目录

```shell
rm item...
```

##### `rm` 常用的选项

| 选项                | 意义                   |
| ----------------- | -------------------- |
| -i, --interactive | 在删除已存在的文件之前，提示用户确认   |
| -r, --recursive   | 递归的删除目录，删除目录时该选项必须定义 |
| -f, --force       | 忽略不存在的文件并不提示         |
| -v, --verbose     | 当删除操作执行的时候显示详细信息     |

##### `ln`创建链接

```shell
ln file link
ln -s item link # 创建硬链接
```

##### 硬链接

- 硬链接不能引用不在其文件系统的文件
- 硬链接不能引用目录

##### 符号链接

通过创建一个具体类型文件包含一个文本指示器指向被引用的文件或目录

- 如果你写内容到符号链接，被引用的文件也会被写入
- 如果你删除一个符号链接，只是链接被删除，文件本身不会被删除
- 如果文件在符号链接之前被删除，链接会继续存在，只是什么都不指向

#### 使用命令

- `type` 表明一个命令名称是如何解释的
- `which` 显示哪个可执行程序将被执行
- `man` 显示一个命令的帮助手册
- `apropos`显示合适的命令列表
- `info` 显示命令的信息入口
- `whatis` 显示命令的简要描述
- `alias` 为命令创建一个别名
  `type` 显示一个命令的类型

`which` 显示一个可执行程序的位置

##### 获取命令的帮助文档

`help` 获取shell内置命令的帮助信息

`--help` 显示用法信息

`man` 显示命令的手册页

`apropos` 显示合适的命令

`whatis` 显示命令的简要信息

`info` 显示命令的信息实体

**一行可以写多个命令，每个命令用`;`隔开**

`alias` 使用别名创建自己的命令

```shell
alias name='string'
alias foo='cd /usr;ls;cd -'
```

`unalias` 删除创建的命令

#### 重定向

- `cat` 查看文件内容
- `sort`排序文本的行
- `uniq`报告或忽略重复的行
- `grep` 打印匹配某个模式的行
- `wc` 打印每个文件的新行，单词和字节数量
- `head` 输出文件的第一部分
- `tail` 输出文件的最后一部分
- `tee`从标准输入读取，然后写到标准输出和文件

##### 重定向标准输出

使用`>`重定向操作符将标准输出重定向到另外一个文件

```shell
ls -l /usr/bin > ls-output.txt
```

使用`>>`重定向操作符来追加重定向输出到文件而不是覆盖它,如果文件不存在，则会创建该文件

```shell
ls -l /usr/bin >> ls-output.txt
```

标准输入，输出，错误对应0,1,2。

所以可以使用描述数来重定向其他类型的内容到文件

```shell
ls -l /bin/usr 2> ls-error.txt
```

##### 重定向标准输出和标准错误到同一个文件

```shell
ls -l /bin/usr &> ls-output.txt
```

##### 处理不想要的输出

```shell
ls -l /bin/usr 2> /dev/null
```

##### 重定向到标准输入

`cat` 读取一个或多个文件，并把他们复制到标准输出

```shell
cat [file...]
```

使用`cat` 将多个文件合并成一个文件

```shell
cat movie.mpeg.0* > movie.mpeg
```

`cat` 如果没有接收任何参数，将会读取标准输入的内容

```shell
cat > lazy_dog.txt
The quick brown fox jumped over the lazy dog.
```

**使用`<` 可以改变标准输入的源从键盘到文件**

##### 管道

使用`|` 操作符，一个命令的标准输出可以被管道到另外一个命令的标准输入

```shell
ls -l /usr/bin | less
```

##### 过滤器

```shell
ls /bin /usr/bin |sort|less
```

`uniq`报告或忽略重复的行

##### `grep`打印匹配某个模式的行

```shell
grep pattern [file...]
```

```shell
ls /bin /usr/bin | sort | uniq | grep zip
```

`grep` 常用的选项

| 选项   | 意义                   |
| ---- | -------------------- |
| -i   | 忽略大小写                |
| -E   | PATTERN是一个可扩展的正则表达式  |
| -F   | PATTERN是一组由断行符分割的字符串 |
| -w   | 强制PATTERN仅完全匹配字词     |
| -v   | 选中不匹配的行              |

`head` 打印文件的前10行

```shell
head [option]... [file]...
```

`head`常用的选项

| 选项   | 意义              |
| ---- | --------------- |
| -n   | 打印指向数量的行        |
| -q   | 不显示包含给定文件名的文件头  |
| -v   | 总是显示包含给定文件名的文件头 |

`tail` 打印文件的后10行

```shell
tail [option]... [file]...
```

`tail`常用的选项

| 选项   | 意义             |
| ---- | -------------- |
| -f   | 实时输出文件增长的内容    |
| -n   | 打印指向数量的行       |
| -q   | 不显示包含给定文件名的文件头 |
| -v   | 显示包含给定文件名的文件头  |

#### 如Shell一样看世界

- `echo` 打印一行文本

##### 高级键盘把戏

- `clear` 清空屏幕
- `hisotory` 显示历史列表内容

##### 编辑命令行

光标移动命令

| 按键                                    | 行为        |
| ------------------------------------- | --------- |
| `Ctrl-a`                              | 移动光标到行的开始 |
| `Ctrl-e`                              | 移动光标到行的末尾 |
| `Ctrl-f` | 向后移动一个字符，和`->`方向键相同        |           |
| `Ctrl-b` | 向前移动一个字符，和`<-`方向键相同        |           |
| `Alt-f`                               | 向后移动一个单词  |
| `Alt-b`                               | 向前移动一个单词  |
| `Ctrl-l` | 清空屏幕并移动光标到左上角，和`clear`命令相同 |           |

修改文本命令

| 按键       | 意义                      |
| -------- | ----------------------- |
| `Ctrl-d` | 删除当前光标位置的字符             |
| `Ctrl-t` | 将光标所在位置的字符和该字符之前的字符进行交换 |
| `Alt-t`  | 将光标所在的单词和前一个单词进行交换      |
| `Alt-l`  | 将光标所在位置到该单词的结束转换成小写     |
| `Alt-u`  | 将光标所在位置到该单词的结束转换成大写     |

剪切和复制命令

| 按键              | 行为                    |
| --------------- | --------------------- |
| `Ctrl-k`        | 从当前光标位置到行尾剪切          |
| `Ctrl-u`        | 从当前光标位置到行首剪切          |
| `Alt-d`         | 从当前位置到当前单词尾剪切         |
| `Alt-Backspace` | 从当前位置到当前单词剪切          |
| `Ctrl-y`        | 从kill-ring复制并插入当前光标位置 |

#### 权限

- `id` 显示用户身份
- `chmod` 更改文件的模式
- `umask` 设置默认文件权限
- `su`作为另外一个用户运行脚本
- `sudo` 作为另外一个用户执行命令
- `chown` 更改文件的拥有者
- `chgrp` 更改文件组
- `passwd` 更改用户密码

##### 文件类型

| 属性   | 文件类型             |
| ---- | ---------------- |
| -    | 普通文件             |
| d    | 目录               |
| l    | 符号链接             |
| c    | 特殊的字符文件，例如终端     |
| b    | 特殊块文件。如硬盘或CD-ROM |

权限属性

| 属性   | 文件        | 目录               |
| ---- | --------- | ---------------- |
| r    | 允许文件被打开和读 | 允许目录内容显示         |
| w    | 允许文件被写或清空 | 允许目录内创建，删除或重命名文件 |
| x    | 允许文件被执行   | 允许目录被进入          |

文件模式：代表读，写和执行权限

文件拥有者，文件组拥有者，其他任何人

| 八进制  | 二进制  | 文件模式 |
| ---- | ---- | ---- |
| 0    | 000  | ---  |
| 1    | 001  | --x  |
| 2    | 010  | -w-  |
| 3    | 011  | -wx  |
| 4    | 100  | r--  |
| 5    | 101  | r-x  |
| 6    | 110  | rw-  |
| 7    | 111  | rwx  |

`chmod` 的用法

```shell
chmod [option]... MODE[,MODE]... FILE...
chmod [OPTION]... OCTAL-MODEL FILE...
```

- `-c` 像verbose 但是只在改变的时候报告
- `-f`隐藏大多数错误消息
- `-v` 输出详细信息
- `-R` 递归的改变文件和目录

`chown` 的用法

```shell
chown [owner][:[group]] file...
```

#### 进程

- `ps` 打印当前进程的快照
- `top` 显示任务
- `jobs` 列出激活的调度
- `bg` 将一个调度放到背景
- `fg`将一个任务放到前景
- `kill`给进程发送信号
- `killall` 根据名称杀死进程
- `shutdown` 关闭或重启系统


**`ps` 命令的用法**

显示当前进程的快照

```shell
ps [options]
```

该版本的ps接收几种类型的选项：

1. UNIX选项，必须以`-`开始
2. BSD选项，不能以`-`开始
3. GNU长选项，由`--`选项

示例

1. 使用标准语法

```shell
ps -e
ps -ef
ps -eF
ps -ely
```

2. 使用BSD语法

```shell
ps ax
ps aux
```

使用`top`动态地查看进程

**`kill`命令的用法**

```shell
kill [-signal] PID
```

如果在命令行没有定义信号，`TERM`默认会被发送

常用信号

| 数字   | 名称   | 意义   |
| ---- | ---- | ---- |
| 1    | HUP  | 挂起   |
| 2    | INT  | 中断   |
| 9    | KILL | 杀死   |
| 15   | TERM | 终止   |
| 18   | CONT | 持续   |
| 19   | STOP | 停止   |

#### 环境

- `printenv` 打印部分或所有的环境
- `set` 设置shell选项
- `export`导出环境
- `alias` 创建一个命令的别名


#### 网络

- `ping` 发送一个ICMP ECHO_REQUEST到网络主机
- `traceroute` 
- `netstat` 打印网络链接，路由表，接口统计
- `ftp` 网络文件传输程序
- `wget` 非交互网络下载器
- `ssh` openssh客户端


#### 挂载磁盘

使用`mount`手动挂载设备

```shell
mount /what /where
```

在linux，两个目录被创建作为默认的挂载点`/mnt`和`/media`

```shell
mount -t cifs -o username=yourname //lor/myshare /mnt
```

- 被使用到的文件系统
- 执行这次挂载的用户名
- 共享名
- 目录名

使用`umount`来卸载设备

该命令接收两个参数：设备的名称或挂载目录的名称

使用`fuser`命令显示使用特殊文件或文件系统的进程ID 也叫PID

#### `basename` 从文件名中去掉路径和扩展名

语法

```shell
basename [选项][参数]
```

示例

1. 从文件名中去掉路径信息，只显示纯粹的文件名

   ```shell
   basename GitRepository/MyNote/Linux学习笔记.md
   ```

2. 从文件名中去掉路径信息和扩展名

   ```shell
   basename GitRepository/MyNote/Linux学习笔记.md .md
   ```

#### `find`在指定目录下查找文件并执行指定的操作

语法

```shell
find [选项][参数]
```

选项说明

- `-name <匹配模式>`：查找文件名符合给定的匹配模式的所有文件，匹配模式内可使用shell通配符`*`,`?`,`[]`
- `-lname <匹配模式>`：查找文件名符合给定的匹配模式的所有符号链接文件，匹配模式内可用通配符
- `-gid <组ID>`：查找属于指定组ID的所有文件
- `-uid <用户ID>`：查找属于指定用户ID的所有文件
- `-group <组名>`：查找属于指定组名的所有文件
- `-user <用户名>`：查找属于指定用户名的所有文件
- `-empty` ：查找大小为0的目录或文件
- `-path <匹配模式>`：查找符合指定匹配模式的路径名的所有文件
- `-perm <权限模式>`：查找符合指定的权限模式的文件或目录
- `-size <文件大小>`：查找指定文件大小的文件
- `-type <类型>`：查找指定类型的文件，支持的文件类型如下：
  - b 块设备文件
  - c 字符设备文件
  - d 目录文件
  - p 命名管道
  - f 普通文件
  - l 符号链接文件
  - s socket文件
- `-xtype <类型>`：仅查找符号链接文件
- `-exec指令名称 {} \`:对符合查询条件的文件执行所指定的命令 {}表示将find指令查找到文件作为指令的参数，指令的最后必须是固定字符`\`
- `-ls`：详细列出所找到的所有文件
- `-print`：在标准输出设备上显示查找到的文件名，默认选项
- `-printf <格式>`：指定显示查找到的文件的格式

#### `ln`创建文件链接

语法

```shell
ln [选项][参数]
```

- 只能对普通文件创建硬链接，目录不允许创建硬链接
- 创建了硬链接的两个文件等同于一个文件，仅仅是文件名不同而已，硬链接和源文件的索引节点号相同，删除任何一个文件，另外一个文件内容不受影响，修改任何一个文件，另一个文件的内容会跟着发生变化
- 符号链接文件中保存的是源文件的存放路径，所以删除源文件后，符号链接将失去意义
- 符号链接类似于快捷方式，可以简化文件或目录的访问路径
- 硬链接仅能在同一个分区下创建不能跨越不同的分区，符号链接可以跨越不同的分区，因为符号链接文件本身只记录了源文件的路径信息，而硬链接要创建一个具有相同索引节点的链接文件

用法

```shell
ln -s GitRepository/MyNote my-note
cd my-note
```

#### `locate`快速定位文件的路径

语法

```shell
locate [选项][参数]
```

选项说明

| 选项         | 功能                    |
| ---------- | --------------------- |
| -d <目录>    | 指定locate数据库文件所在的目录    |
| -u         | 创建或更新locate数据库        |
| -i         | 在查找文件时，忽略文件名中字符大小写差异  |
| -q         | 静默模式，不显示错误信息          |
| -n <数字>    | 指定最多输出的查找的结果数目        |
| -r <规则表达式> | 使用基本的POSIX规则表达式进行查找匹配 |

典型示例

1. 快速定位文件路径

   ```shell
   locate fdisk
   ```



### 命令，选项和参数

一个Linux命令通常包含三个部分：
1. 命令本身
2. 命令选项
3. 参数

`useradd -m -G sales linda`

### 管道和重定向

使用管道，你可以发送一个命令的结果到另外一个命令，使用重定向，你可以决定该命令应该把它的结果发送到何处

`ls -R / | less`

> FUCK THIS RUBBISH COMPANY
> USE THE OUT DATE TECHNOLOGY.NO LINUX SERVER,NO GIT,NO MAVEN,AS A JAVA PROGRAMMTER I WANT TO SAY FUCK YOU 
> NOT ONLY THIS ,BUT ALSO OTHERS
> FOR EXAMPLE,NO INTERNET
> I DON'T WANT TO ANY MORE.
> IF I HAVE ANOTHER CHOICE,I WILL NOT CHOICE THIS COMPANY
> BUT NOW,BECAUSE I DONT' HAVE ENOUGH MONEY AND MY BROTHER IS GOING TO MARRY
> BEFORE MARRY,STILL HAVE MONEY TO BUY HOUSE
> FUCK CHINA HOUSE PRICE
> FUCK !!!

使用`ls -l` 默认显示在控制台上

使用`ls -l > somewhere` 输出到文件，如果该文件不存在，则会创建，如果存在，则覆盖

使用`ls -l >> somewhere`输出到文件，如果该文件不存在，则会创建，如果存在，则添加到文件最后

使用`mail -s hello root < .` 进行输入重定向

#### 获取帮助

1. 使用`man`命令
2. 使用命令的`--help`选项
3. 使用Bash自带的`help`选项来获取更多的信息


